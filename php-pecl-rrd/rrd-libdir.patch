diff -up rrd-0.9.0/config.m4.libdir rrd-0.9.0/config.m4
--- rrd-0.9.0/config.m4.libdir	1970-01-01 10:13:08.000000000 +0100
+++ rrd-0.9.0/config.m4	2011-01-03 19:24:18.862305590 +0100
@@ -32,7 +32,11 @@ if test "$PHP_RRD" != "no"; then
     dnl Library path
     AC_MSG_CHECKING([for rrdtool library files in default path])
     for i in librrd.$SHLIB_SUFFIX_NAME librrd.a; do
-      test -f $RRDTOOL_DIR/lib/$i && RRDTOOL_LIBDIR=$RRDTOOL_DIR/lib
+      if test -f $libdir/$i; then
+      	RRDTOOL_LIBDIR=$libdir/$i
+      elif test -f $RRDTOOL_DIR/lib/$i; then
+        RRDTOOL_LIBDIR=$RRDTOOL_DIR/lib
+      fi
     done
     if test -z "$RRDTOOL_LIBDIR"; then
       AC_MSG_RESULT([not found])
