From b0b73751be69058ca61109bde9eafeda114c620a Mon Sep 17 00:00:00 2001
From: Remi Collet <fedora@famillecollet.com>
Date: Thu, 16 Jul 2015 09:20:36 +0200
Subject: [PATCH 1/2] fix for changes in justinrainbow/json-schema 1.4.4

---
 composer.json                                   |  2 +-
 tests/Composer/Test/Json/ComposerSchemaTest.php | 12 ++++++------
 2 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/composer.json b/composer.json
index ffac4f2..91e385e 100644
--- a/composer.json
+++ b/composer.json
@@ -23,7 +23,7 @@
     },
     "require": {
         "php": ">=5.3.2",
-        "justinrainbow/json-schema": "~1.4",
+        "justinrainbow/json-schema": "^1.4.4",
         "seld/jsonlint": "~1.0",
         "symfony/console": "~2.5",
         "symfony/finder": "~2.2",
diff --git a/tests/Composer/Test/Json/ComposerSchemaTest.php b/tests/Composer/Test/Json/ComposerSchemaTest.php
index 1b8805f..cf44d4a 100644
--- a/tests/Composer/Test/Json/ComposerSchemaTest.php
+++ b/tests/Composer/Test/Json/ComposerSchemaTest.php
@@ -23,18 +23,18 @@ public function testRequiredProperties()
     {
         $json = '{ }';
         $this->assertEquals(array(
-            array('property' => '', 'message' => 'the property name is required'),
-            array('property' => '', 'message' => 'the property description is required'),
+            array('property' => 'name', 'message' => 'The property name is required'),
+            array('property' => 'description', 'message' => 'The property description is required'),
         ), $this->check($json));
 
         $json = '{ "name": "vendor/package" }';
         $this->assertEquals(array(
-            array('property' => '', 'message' => 'the property description is required'),
+            array('property' => 'description', 'message' => 'The property description is required'),
         ), $this->check($json));
 
         $json = '{ "description": "generic description" }';
         $this->assertEquals(array(
-            array('property' => '', 'message' => 'the property name is required'),
+            array('property' => 'name', 'message' => 'The property name is required'),
         ), $this->check($json));
     }
 
@@ -44,7 +44,7 @@ public function testMinimumStabilityValues()
         $this->assertEquals(array(
             array(
                 'property' => 'minimum-stability',
-                'message' => 'does not match the regex pattern ^dev|alpha|beta|rc|RC|stable$'
+                'message' => 'Does not match the regex pattern ^dev|alpha|beta|rc|RC|stable$'
             ),
         ), $this->check($json), 'empty string');
 
@@ -52,7 +52,7 @@ public function testMinimumStabilityValues()
         $this->assertEquals(array(
             array(
                 'property' => 'minimum-stability',
-                'message' => 'does not match the regex pattern ^dev|alpha|beta|rc|RC|stable$'
+                'message' => 'Does not match the regex pattern ^dev|alpha|beta|rc|RC|stable$'
             ),
         ), $this->check($json), 'dummy');
 

From 128901a8d0bb3ff54c0b2dc94638632e07f7ad79 Mon Sep 17 00:00:00 2001
From: Remi Collet <fedora@famillecollet.com>
Date: Thu, 16 Jul 2015 09:21:13 +0200
Subject: [PATCH 2/2] ignore this test with 'jsonc'

---
 tests/Composer/Test/Json/JsonFileTest.php | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/tests/Composer/Test/Json/JsonFileTest.php b/tests/Composer/Test/Json/JsonFileTest.php
index 279ccd9..ee65629 100644
--- a/tests/Composer/Test/Json/JsonFileTest.php
+++ b/tests/Composer/Test/Json/JsonFileTest.php
@@ -54,6 +54,9 @@ public function testParseErrorSkipsEscapedBackslash()
 
     public function testParseErrorDetectSingleQuotes()
     {
+        if (defined('JSON_PARSER_NOTSTRICT')) {
+            $this->markTestSkipped('jsonc issue');
+        }
         $json = '{
         \'foo\': "bar"
 }';
